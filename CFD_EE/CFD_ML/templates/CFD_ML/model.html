{% extends "AI_Fraud_Detection/base1.html" %}
{% load crispy_forms_tags %}
{% block content %}
<div class="container">
  <!-- Page Heading/Breadcrumbs -->
  <ol class="breadcrumb mt-4 mb-3">
      <li class="breadcrumb-item">
        <a href="{% url 'AI-home' %}">Home</a>
      </li>
      <li class="breadcrumb-item active">Customer Fraud Detection</li>
  </ol>

  <div class="row mt-4 mb-3">
      <div class="col-lg-8 mb-4">
        <form method="POST" enctype="multipart/form-data" action="prediction">
            {% csrf_token %}
            <fieldset class="form-group">
                <legend class="border-bottom mb-4">False Positive Identification</legend>
                <p>
                  To identify the false positive alerts, please upload the extract generated from the AML tool with the customer details of the suspected fraudelent customers.                  
                </p>
                <p>
                  The extract generated by this tool will provide you the False Positive alerts generated by the AML system. This extract can be used to close the false positive alerts in the AML system.
                </p>                
                    <input type='file' name="document" class="btn btn-outline-info">  
                    {% if prediction %}                  
                    <div class="border-top pt-3">
                        <small class="text-muted">File Name : {{uploaded_file.name}}</small>
                    </div>
                    {% endif %}                                    
            </fieldset>
            <div class="form-group">
                <button class="btn btn-outline-info" type="submit">Classify</button>
            </div>
        </form>
        {% if prediction %}

          <div class="row mt-4 mb-3">
            <p>
              <mark>False positive percentage reduced <kbd>{{fp_percent}}</kbd></mark>
            </p>
            <table class="table table-light table-striped">
              <thead> 
                <tr> 
                  <th>Classification</th> 
                  <th>Count</th>                   
                </tr> 
              </thead> 
              <tbody> 
                <tr> 
                  <td>False Positive</td> 
                  <td>
                    {{fp_count}}
                  </td>                   
                </tr>
                <tr> 
                  <td>Fraud</td> 
                  <td>
                    {{f_count}}
                  </td>                   
                </tr>
                <tr> 
                  <td>New Customer</td> 
                  <td>
                    {{n_count}}
                  </td>                   
                </tr>
              </tbody>
            </table>
          </div>

          <div>
            <img src="/media/graph.png" height="400">
          </div>
        
        <h3>Classification Data</h3>
        <small>
          <a href="/media/output.csv">Download file</a>
        </small>
        <table class="table table-light table-striped"> 
            <thead> 
              <tr> 
                <th>First Name</th> 
                <th>Last Name</th> 
                <th>Classification</th> 
              </tr> 
            </thead> 
            <tbody> 
            <!-- jinja2 Technique -->
               
            {% for i in prediction %} 
              <tr> 
                <td>{{i.First_Name}}</td> 
                <td>{{i.Last_Name}}</td> 
                <td>{{i.label}}</td>
              </tr> 
            {% endfor %} 
        {% endif %} 
            </tbody> 
          </table> 

      </div>
      <!-- Sidebar Widgets Column -->
      <div class="col-md-4">

        <!-- Search Widget -->
        <div class="card mb-4">
          <h5 class="card-header">Tags</h5>
          <div class="card-body">
            <img src="/media/DRR.PNG">
          </div>
        </div>
        <!-- Categories Widget -->
        <div class="card my-4">
          <h5 class="card-header">Categories</h5>
          <div class="card-body">
            <div class="row">
              <div class="col-lg-10">
                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="{% url 'classify' %}">Customer Fraud Detection</a>
                  </li>
                  <li>
                    <a href="{% url 'lookup' %}">Customer Single Lookup</a>
                  </li>
                  <li>
                    <a href="#">Payment Fraud Detection</a>
                  </li>
                  <li>
                    <a href="#">Payment Single Lookup</a>
                  </li>
                </ul>
              </div>              
            </div>
          </div>
        </div>
        <!-- References Widget -->
        <div class="card my-4">
          <h5 class="card-header">References</h5>
          <div class="card-body">
              <div class="row">
                  <div class="col-lg-10">
                      <ul class="list-unstyled mb-0">
                          <li>
                          <a href="#"></a>
                          </li>
                          <li>
                          <a href="#"></a>
                          </li>
                          <li>
                          <a href="#"></a>
                          </li>
                          <li>
                          <a href="#"></a>
                          </li>
                      </ul>
                  </div>
              </div>
          </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}